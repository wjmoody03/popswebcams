angular.module("circle.countdown",[]).directive("countdown",["$timeout","$interval",function(a,b){return{scope:{time:"=time",finishCallback:"&callback"},restrict:"EA",template:'<div class="ClassyCountdown-wrapper"><div class="ClassyCountdown-days"><input value="{{ knob.seconds.value }}"/><span class="ClassyCountdown-value"><div></div><span></span></span></div><div class="ClassyCountdown-hours"><input value="{{ knob.seconds.value }}"/><span class="ClassyCountdown-value"><div></div><span></span></span></div><div class="ClassyCountdown-minutes"><input value="{{ knob.seconds.value }}"/><span class="ClassyCountdown-value"><div></div><span></span></span></div><div class="ClassyCountdown-seconds"><input value="{{ knob.seconds.value }}"/><span class="ClassyCountdown-value"><div></div><span></span></span></div></div>',replace:!1,controller:function(a,c,d,e){function f(){i.find(".ClassyCountdown-wrapper > div").each(function(){$(this).css("height",$(this).width()+"px")}),settings.style.textResponsive&&(i.find(".ClassyCountdown-value").css("font-size",Math.floor(i.find("> div").eq(0).width()*settings.style.textResponsive/10)+"px"),i.find(".ClassyCountdown-value").each(function(){$(this).css("margin-top",Math.floor(0-parseInt($(this).height())/2)+"px")})),$(window).trigger("resize"),$(window).resize($.throttle(50,g))}function g(){i.find(".ClassyCountdown-wrapper > div").each(function(){$(this).css("height",$(this).width()+"px")}),settings.style.textResponsive&&i.find(".ClassyCountdown-value").css("font-size",Math.floor(i.find("> div").eq(0).width()*settings.style.textResponsive/10)+"px"),i.find(".ClassyCountdown-value").each(function(){$(this).css("margin-top",Math.floor(0-parseInt($(this).height())/2)+"px")}),i.find(".ClassyCountdown-days input").trigger("change"),i.find(".ClassyCountdown-hours input").trigger("change"),i.find(".ClassyCountdown-minutes input").trigger("change"),i.find(".ClassyCountdown-seconds input").trigger("change"),i.find(".ClassyCountdown-days input").knob({width:$(".ClassyCountdown-days").width()}),i.find(".ClassyCountdown-hours input").knob({width:$(".ClassyCountdown-hours").width()}),i.find(".ClassyCountdown-minutes input").knob({width:$(".ClassyCountdown-minutes").width()}),i.find(".ClassyCountdown-seconds input").knob({width:$(".ClassyCountdown-seconds").width()}),$(".ClassyCountdown-days input").trigger("configure",{width:$(".ClassyCountdown-days").width()}),$(".ClassyCountdown-hours input").trigger("configure",{width:$(".ClassyCountdown-hours").width()}),$(".ClassyCountdown-minutes input").trigger("configure",{width:$(".ClassyCountdown-minutes").width()}),$(".ClassyCountdown-seconds input").trigger("configure",{width:$(".ClassyCountdown-seconds").width()})}function h(a){switch(a){case"flat-colors":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.01,bgColor:"rgba(0,0,0,0.05)",fgColor:"#1abc9c"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},hours:{gauge:{thickness:.01,bgColor:"rgba(0,0,0,0.05)",fgColor:"#2980b9"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},minutes:{gauge:{thickness:.01,bgColor:"rgba(0,0,0,0.05)",fgColor:"#8e44ad"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},seconds:{gauge:{thickness:.01,bgColor:"rgba(0,0,0,0.05)",fgColor:"#f39c12"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"}}};case"flat-colors-wide":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.03,bgColor:"rgba(0,0,0,0.05)",fgColor:"#1abc9c"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},hours:{gauge:{thickness:.03,bgColor:"rgba(0,0,0,0.05)",fgColor:"#2980b9"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},minutes:{gauge:{thickness:.03,bgColor:"rgba(0,0,0,0.05)",fgColor:"#8e44ad"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},seconds:{gauge:{thickness:.03,bgColor:"rgba(0,0,0,0.05)",fgColor:"#f39c12"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"}}};case"flat-colors-very-wide":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.12,bgColor:"rgba(0,0,0,0.05)",fgColor:"#1abc9c"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},hours:{gauge:{thickness:.12,bgColor:"rgba(0,0,0,0.05)",fgColor:"#2980b9"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},minutes:{gauge:{thickness:.12,bgColor:"rgba(0,0,0,0.05)",fgColor:"#8e44ad"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},seconds:{gauge:{thickness:.12,bgColor:"rgba(0,0,0,0.05)",fgColor:"#f39c12"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"}}};case"flat-colors-black":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.25,bgColor:"rgba(0,0,0,0.05)",fgColor:"#1abc9c",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},hours:{gauge:{thickness:.25,bgColor:"rgba(0,0,0,0.05)",fgColor:"#2980b9",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},minutes:{gauge:{thickness:.25,bgColor:"rgba(0,0,0,0.05)",fgColor:"#8e44ad",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},seconds:{gauge:{thickness:.25,bgColor:"rgba(0,0,0,0.05)",fgColor:"#f39c12",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"}}};case"black":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.01,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},hours:{gauge:{thickness:.01,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},minutes:{gauge:{thickness:.01,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},seconds:{gauge:{thickness:.01,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"}}};case"black-wide":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.03,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},hours:{gauge:{thickness:.03,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},minutes:{gauge:{thickness:.03,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},seconds:{gauge:{thickness:.03,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"}}};case"black-very-wide":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.17,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},hours:{gauge:{thickness:.17,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},minutes:{gauge:{thickness:.17,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},seconds:{gauge:{thickness:.17,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"}}};case"black-black":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.25,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},hours:{gauge:{thickness:.25,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},minutes:{gauge:{thickness:.25,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"},seconds:{gauge:{thickness:.25,bgColor:"rgba(0,0,0,0.05)",fgColor:"#222",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#34495e;"}}};case"white":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.03,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},hours:{gauge:{thickness:.03,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},minutes:{gauge:{thickness:.03,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},seconds:{gauge:{thickness:.03,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"}}};case"white-wide":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.06,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},hours:{gauge:{thickness:.06,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},minutes:{gauge:{thickness:.06,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},seconds:{gauge:{thickness:.06,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"}}};case"white-very-wide":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.16,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},hours:{gauge:{thickness:.16,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},minutes:{gauge:{thickness:.16,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},seconds:{gauge:{thickness:.16,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"}}};case"white-black":return{labels:!0,style:{element:"",textResponsive:.5,days:{gauge:{thickness:.25,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},hours:{gauge:{thickness:.25,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},minutes:{gauge:{thickness:.25,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"},seconds:{gauge:{thickness:.25,bgColor:"rgba(255,255,255,0.05)",fgColor:"#fff",lineCap:"round"},textCSS:"font-family:'Open Sans';font-weight:300;color:#fff;"}}}}}var i=$(c);d.autostart||"true";a.knob={days:{value:60,options:{max:365,readOnly:!0,displayPrevious:!0}},hours:{value:60,options:{max:24,readOnly:!0,displayPrevious:!0}},minutes:{value:60,options:{max:60,readOnly:!0,displayPrevious:!0}},seconds:{value:60,options:{max:60,readOnly:!0,displayPrevious:!0}}},a.theme=d.colors||"white";var j=h(a.theme),k={end:void 0,now:$.now(),labels:!0,labelsOptions:{lang:{days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds"},style:"font-size: 0.5em;"},style:{element:"",labels:!1,textResponsive:.5,days:{gauge:{thickness:.02,bgColor:"rgba(0, 0, 0, 0)",fgColor:"rgba(0, 0, 0, 1)",lineCap:"butt"},textCSS:""},hours:{gauge:{thickness:.02,bgColor:"rgba(0, 0, 0, 0)",fgColor:"rgba(0, 0, 0, 1)",lineCap:"butt"},textCSS:""},minutes:{gauge:{thickness:.02,bgColor:"rgba(0, 0, 0, 0)",fgColor:"rgba(0, 0, 0, 1)",lineCap:"butt"},textCSS:""},seconds:{gauge:{thickness:.02,bgColor:"rgba(0, 0, 0, 0)",fgColor:"rgba(0, 0, 0, 1)",lineCap:"butt"},textCSS:""}},onEndCallback:function(){}};settings=k,angular.extend(settings,j),angular.extend(a.knob.days.options,j.style.days.gauge),angular.extend(a.knob.hours.options,j.style.hours.gauge),angular.extend(a.knob.minutes.options,j.style.minutes.gauge),angular.extend(a.knob.seconds.options,j.style.seconds.gauge);var l,m,n,o,p,q=!1;p=parseInt(a.time),a.secondsToDHMS=function(){l=Math.floor(p/86400),m=Math.floor(p%86400/3600),n=Math.floor(p%86400%3600/60),o=Math.floor(p%86400%3600%60%60)},a.doTick=function(){p--,a.secondsToDHMS(),0>=p&&(q||(q=!0,a.$eval(a.finishCallback),b.cancel(this.timerInterval)),l=0,m=0,n=0,o=0),i.find(".ClassyCountdown-days input").val(l).change(),i.find(".ClassyCountdown-hours input").val(m).change(),i.find(".ClassyCountdown-minutes input").val(n).change(),i.find(".ClassyCountdown-seconds input").val(o).change(),i.find(".ClassyCountdown-days .ClassyCountdown-value > div").html(l),i.find(".ClassyCountdown-hours .ClassyCountdown-value > div").html(m),i.find(".ClassyCountdown-minutes .ClassyCountdown-value > div").html(n),i.find(".ClassyCountdown-seconds .ClassyCountdown-value > div").html(o)},a.$on("timer-start",function(){a.doTick()}),a.$on("timer-pause",function(){a.resume()}),a.$on("timer-resume",function(){a.resume()}),a.$on("timer-stop",function(){a.stop()}),a.$on("timer-add-seconds",function(b,c){a.addSeconds(c.seconds)}),a.$on("timer-set-seconds",function(b,c){a.setSeconds(c.seconds)}),a.init=function(){a.secondsToDHMS(),i.find(".ClassyCountdown-wrapper > div").attr("style",settings.style.element),i.find(".ClassyCountdown-days .ClassyCountdown-value").attr("style",settings.style.days.textCSS),i.find(".ClassyCountdown-hours .ClassyCountdown-value").attr("style",settings.style.hours.textCSS),i.find(".ClassyCountdown-minutes .ClassyCountdown-value").attr("style",settings.style.minutes.textCSS),i.find(".ClassyCountdown-seconds .ClassyCountdown-value").attr("style",settings.style.seconds.textCSS),i.find(".ClassyCountdown-value").each(function(){$(this).css("margin-top",Math.floor(0-parseInt($(this).height())/2)+"px")}),settings.labels&&(i.find(".ClassyCountdown-days .ClassyCountdown-value > span").html(settings.labelsOptions.lang.days),i.find(".ClassyCountdown-hours .ClassyCountdown-value > span").html(settings.labelsOptions.lang.hours),i.find(".ClassyCountdown-minutes .ClassyCountdown-value > span").html(settings.labelsOptions.lang.minutes),i.find(".ClassyCountdown-seconds .ClassyCountdown-value > span").html(settings.labelsOptions.lang.seconds),i.find(".ClassyCountdown-value > span").attr("style",settings.labelsOptions.style)),i.find(".ClassyCountdown-days .ClassyCountdown-value > div").html(l),i.find(".ClassyCountdown-hours .ClassyCountdown-value > div").html(m),i.find(".ClassyCountdown-minutes .ClassyCountdown-value > div").html(n),i.find(".ClassyCountdown-seconds .ClassyCountdown-value > div").html(o),i.find(".ClassyCountdown-days input").val(l).change(),i.find(".ClassyCountdown-hours input").val(m).change(),i.find(".ClassyCountdown-minutes input").val(n).change(),i.find(".ClassyCountdown-seconds input").val(o).change(),i.find(".ClassyCountdown-days input").val(l).knob(angular.extend(a.knob.days.options,{width:$(".ClassyCountdown-days").width()})),i.find(".ClassyCountdown-hours input").val(m).knob(angular.extend(a.knob.hours.options,{width:$(".ClassyCountdown-hours").width()})),i.find(".ClassyCountdown-minutes input").val(n).knob(angular.extend(a.knob.minutes.options,{width:$(".ClassyCountdown-minutes").width()})),i.find(".ClassyCountdown-seconds input").val(o).knob(angular.extend(a.knob.seconds.options,{width:$(".ClassyCountdown-seconds").width()}))},a.start=function(){this.timerInterval=b(function(){a.doTick()},1e3)},a.pause=function(){b.cancel(this.timerInterval)},a.resume=function(){a.start()},a.stop=function(){p=0,a.secondsToDHMS(),i.find(".ClassyCountdown-days .ClassyCountdown-value > div").html(l),i.find(".ClassyCountdown-hours .ClassyCountdown-value > div").html(m),i.find(".ClassyCountdown-minutes .ClassyCountdown-value > div").html(n),i.find(".ClassyCountdown-seconds .ClassyCountdown-value > div").html(o),i.find(".ClassyCountdown-hours input").val(m).change(),i.find(".ClassyCountdown-minutes input").val(n).change(),i.find(".ClassyCountdown-seconds input").val(o).change()},a.addSeconds=function(a){p+=a},a.setSeconds=function(a){p=a},a.init(),f(),"true"==d.autostart&&a.start()}}}]);